"use strict";var Sandbox=Sandbox||{};$(function(){Sandbox.server=new Sandbox.Server;Sandbox.viewModel=new Sandbox.ViewModel;ko.bindingHandlers.returnAction={init:function(n,t,i,r){var u=ko.utils.unwrapObservable(t());$(n).keydown(function(n){n.which===13&&u(r)})}};ko.applyBindings(Sandbox.viewModel)});Sandbox.ViewModel=function(){this.chatData=ko.observable(new Sandbox.ChatViewModel)};Sandbox.ChatViewModel=function(){var n=this;this.connectedClients=ko.observable(0);this.composedMessage=ko.observable();this.messages=ko.observableArray();this.send=function(){Sandbox.server.hub.server.sendMessage(n.composedMessage());n.composedMessage(null)}};Sandbox.Server=function(){var n=this;this.hub=$.connection.sandboxHub;this.hub.client.updatedClientCount=function(n){Sandbox.viewModel.chatData().connectedClients(n)};this.hub.client.messageReceived=function(n){Sandbox.viewModel.chatData().messages.push(n)};$.connection.hub.logging=!0;$.connection.hub.start().done().fail(function(){console.error("Error connecting to SignalR hub. Please refresh the page to try again.")});$.connection.hub.disconnected(function(){console.error("Lost connection to server. Please refresh the page.")})};